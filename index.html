<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="css/style.css">
    <link id="bs-css" rel="stylesheet" href="bower_components/bootstrap/dist/css/bootstrap.min.css">
    <link id="bsdp-css" rel="stylesheet" href="bower_components/bootstrap-datepicker/dist/css/bootstrap-datepicker3.min.css">
    <link rel="stylesheet" href="bower_components/select2/dist/css/select2.min.css">

    <title>ММВБ</title>
</head>

<body>
    <div class="container">
        <div class="row">
            <div class="col-md-9">

                <select class="select-features-list" style="width: 100%">
                </select>
            </div>
            <div class="col-md-2">
                <input type="text" class="form-control" id="datepicker">
            </div>
            <div class="col-md-1">
                <button id="show-btn" class="btn btn-info" type="submit">Показать</button>
            </div>

        </div>
        <div class="row">
            <div class="col-md-12 table-row">
                <table class="table table-bordered table-hover position-details-table">
                    <col>
                        <colgroup span="2"></colgroup>
                        <colgroup span="2"></colgroup>
                        <colgroup></colgroup>
                    <thead>
                            <tr>
                                <td rowspan="2"></td>
                                <th colspan="2" scope="colgroup">Физические лица</th>
                                <th colspan="2" scope="colgroup">Юридические лица</th>
                                <th rowspan="2" scope="colgroup">Совокупный объем открытых позиций</th>
                            </tr>
                            <tr>
                                <th scope="col">Длинные позиции</th>
                                <th scope="col">Короткие позиции</th>
                                <th scope="col">Длинные позиции</th>
                                <th scope="col">Короткие позиции</th>
                            </tr>
                        </thead>
                        <tr>
                            <th scope="row">Количество договоров (контрактов), шт.</th>
                            <td>-</td>
                            <td>-</td>
                            <td>-</td>
                            <td>-</td>
                            <td>-</td>
                        </tr>
                        <tr>
                            <th scope="row">Относительное изменение количества договоров (контрактов) по отношению к предыдущему дню, в %</th>
                            <td>-</td>
                            <td>-</td>
                            <td>-</td>
                            <td>-</td>
                            <td>-</td>
                        </tr>
                        <tr>
                            <th scope="row">Количество лиц, имеющих открытые позиции</th>
                            <td>-</td>
                            <td>-</td>
                            <td>-</td>
                            <td>-</td>
                            <td>-</td>
                        </tr>
                        <tr>
                            <th scope="row">Изменение количества договоров (контрактов) по отношению к предыдущему дню, шт.</th>
                            <td>-</td>
                            <td>-</td>
                            <td>-</td>
                            <td>-</td>
                            <td>-</td>
                        </tr>
                </table>
            </div>
        </div>
        <div class="row chart-row">
            <div class="col-md-6 chart-area">
                <canvas id="fizPositionChart"></canvas>
            </div>
            <div class="col-md-6 chart-area">
                <canvas id="jurPositionChart"></canvas>
            </div>
        </div>
    </div>

    <script type="text/template" class="feature-item-template-select">
        <option value="<%= value %>">
            <%= name %>
        </option>
    </script>

    <!-- TODO: Think how to manage only data-name -->
    <script type="text/template" class="position-details">
        <tr data-name="position">
            <th scope="row">Количество договоров (контрактов), шт.</th>
            <td class="rightCell">
                <%= numberFormat(pos['position'].fiz_long) %>
            </td>
            <td class="rightCell">
                <%= numberFormat(pos['position'].fiz_short) %>
            </td>
            <td>
                <%= numberFormat(pos['position'].jur_long) %>
            </td>
            <td class="rightCell">
                <%= numberFormat(pos['position'].jur_short) %>
            </td>
            <td class="rightCell">
                <%= numberFormat(pos['position'].total) %>
            </td>
        </tr>
        <tr data-name="change_prev_week_abs">
            <th scope="row">Изменение количества договоров (контрактов) по отношению к предыдущему дню, шт.</th>
            <td class="rightCell">
                <%= numberFormat(pos['change_prev_week_abs'].fiz_long) %>
            </td>
            <td class="rightCell">
                <%= numberFormat(pos['change_prev_week_abs'].fiz_short) %>
            </td>
            <td class="rightCell">
                <%= numberFormat(pos['change_prev_week_abs'].jur_long) %>
            </td>
            <td class="rightCell">
                <%= numberFormat(pos['change_prev_week_abs'].jur_short) %>
            </td>
            <td class="rightCell">
                <%= numberFormat(pos['change_prev_week_abs'].total) %>
            </td>
        </tr>
        <tr data-name="change_prev_week_perc">
            <th scope="row">Относительное изменение количества договоров (контрактов) по отношению к предыдущему дню, в %</th>
            <td class="rightCell">
                <%= numberFormatPerc(pos['change_prev_week_perc'].fiz_long) %>
            </td>
            <td class="rightCell">
                <%= numberFormatPerc(pos['change_prev_week_perc'].fiz_short) %>
            </td>
            <td class="rightCell">
                <%= numberFormatPerc(pos['change_prev_week_perc'].jur_long) %>
            </td>
            <td class="rightCell">
                <%= numberFormatPerc(pos['change_prev_week_perc'].jur_short) %>
            </td>
            <td class="rightCell">
                <%= numberFormatPerc(pos['change_prev_week_abs'].total / pos['position'].total ) %>
            </td>
        </tr>
        <tr data-name="clients">
            <th scope="row">Количество лиц, имеющих открытые позиции</th>
            <td class="rightCell">
                <%= numberFormat(pos['clients'].fiz_long) %>
            </td>
            <td class="rightCell">
                <%= numberFormat(pos['clients'].fiz_short) %>
            </td>
            <td class="rightCell">
                <%= numberFormat(pos['clients'].jur_long) %>
            </td>
            <td class="rightCell">
                <%= numberFormat(pos['clients'].jur_short) %>
            </td>
            <td class="rightCell">
                <%= numberFormat(pos['clients'].total) %>
            </td>
        </tr>
    </script>

</body>

<script src="bower_components/jquery/dist/jquery.js"></script>
<script src="bower_components/underscore/underscore.js"></script>
<script src="bower_components/underscore.string/dist/underscore.string.min.js"></script>
<script src="bower_components/backbone/backbone.js"></script>
<script src="bower_components/bootstrap/dist/js/bootstrap.min.js"></script>
<script src="bower_components/select2/dist/js/select2.min.js"></script>
<script src="bower_components/papaparse/papaparse.min.js"></script>
<script src="bower_components/bootstrap-datepicker/dist/js/bootstrap-datepicker.min.js"></script>
<script src="bower_components/bootstrap-datepicker/dist/locales/bootstrap-datepicker.ru.min.js" charset="UTF-8"></script>
<script src="bower_components/moment/min/moment.min.js"></script>
<script src="bower_components/chart.js/dist/Chart.min.js"></script>
<script src="js/charts.js"></script>
<script src="js/scripts.js"></script>

</html>